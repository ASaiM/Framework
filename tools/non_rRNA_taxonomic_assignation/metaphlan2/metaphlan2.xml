<tool id="metaplan2" name="Taxonomic profiling">

    <description>with MetaPhlAn 2</description>

    <macros>

    </macros>

    <requirements>
    </requirements>

    <stdio>
    </stdio>

    <version_command></version_command>

    <!--<command>-->
    <command>
        metaphlan2/metaphlan2.py $input_file $output_file
            --mpa_pkl metaphlan2/db_v20/mpa_v20_m200.pkl
            --bowtie2db metaphlan2/db_v20/mpa_v20_m200
            --input_type automatic
    </command>

    <inputs>
        <param name="input_file" type="data" format="fastq,fasta" label="Input file" help=""/>

    </inputs>

    <outputs>
        <data format="text" name="output_file" label="metaphlan_outputs_${input_file.name}.txt" />
    </outputs>

    <tests>

    </tests>

    <help>
        **What it does**

        MetaPhlAn 2 is a tool for profiling the composition of microbial communities (Bacteria, Archaea, Eukaryotes and Viruses) from metagenomic shotgun sequencing data with species level resolution. 

        .. _Read more about the tool: https://bitbucket.org/biobakery/metaphlan2/

        **Input**

        A single file is the input. It can be:

            - a fastq file containing metagenomic reads
            - a BowTie2 produced SAM file. 
            - an intermediary mapping file of the metagenome generated by a previous MetaPhlAn run filtered shotgun sequencing metagenome file (fastq, fastq.gz, fasta, or fasta.gz format)

        **Outputs**

        MetaPhlAn 2 creates one tab-separated output file of the predicted taxon relative abundances 

        **Parameters**


    </help>

    <citations>
    </citations>
</tool>